@model IEnumerable<SelfDevelopmentApp.Models.Article>
@using System.IO;
@using System.Text;
@*@{
        var base64 = Convert.ToBase64String(Model.Image);
        var imgsrc = string.Format("data:image/jpg;base64,{0}", base64);
        var str = "";
        //string filePath = string.Format("data:text/txt;base64,{0}", base64);
        using (MemoryStream stream = new MemoryStream((byte[])Model.Text, false))
        using (StreamReader reader = new StreamReader(stream, Encoding.Default, true))
        {
            str += reader.ReadToEnd();
        }
    }*@




@{
    Layout = "_blog";
}

 ======= Breadcrumbs =======
<section id="breadcrumbs" class="breadcrumbs">
    <div class="container">

        <ol>
            <li><a asp-area="" asp-controller="Home" asp-action="Index">Home</a></li>
            <li>Blog</li>
        </ol>
        <h2>Blog</h2>

    </div>
</section><!-- End Breadcrumbs -->
<!-- ======= Blog Section ======= -->
<section id="blog" class="blog">
    <div class="container" data-aos="fade-up">

        <div class="row">

            <div class="col-lg-8 entries">



                @foreach (var item in Model)
                 {


                        var base64 = Convert.ToBase64String(item.Image);
                        var imgsrc = string.Format("data:image/jpg;base64,{0}", base64);
                        var str = "";
                        using (MemoryStream stream = new MemoryStream((byte[])item.Text, false))
                        using (StreamReader reader = new StreamReader(stream, Encoding.Default, true))
                        {
                            str += reader.ReadToEnd();
                        }
                        string displayedTxt = str.Split('\n')[0];


                        <article class="entry">

                        <div class="entry-img">
                            <img src='@imgsrc' alt="" class="img-fluid">
                        </div>

                        <h2 class="entry-title">
                            <a asp-area="" asp-controller="Articles" asp-action="Details" asp-route-id="@item.ID">@item.Title  |  @item.Topic.Name</a>
                        </h2>

                        <div class="entry-meta">
                            <ul>
                                <li class="d-flex align-items-center"><i class="bi bi-person"></i>@item.Author</li>
                            </ul>
                        </div>

                        <div class="entry-content">
                            <p>
                                @displayedTxt
                            </p>
                            <div class="read-more">
                                <a asp-area="" asp-controller="Articles" asp-action="Details" asp-route-id="@item.ID">Read More</a>
                            </div>
                        </div>

                    </article><!-- End blog entry -->


                }

                <div class="blog-pagination">
                    <ul class="justify-content-center">
                        <li><a href="#">1</a></li>
                        <li class="active"><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                    </ul>
                </div>

            </div><!-- End blog entries list -->

            <div class="col-lg-4">

                <div class="sidebar">

                    <h3 class="sidebar-title">Search</h3>
                    <div class="sidebar-item search-form">
                        <form action="" method="post">
                            <input type="text" name="name" required>
                            <button type="submit"><i class="bi bi-search"></i></button>
                        </form>
                    </div><!-- End sidebar search formn-->

                    <h3 class="sidebar-title">Categories</h3>
                    <div class="sidebar-item categories">
                        <ul>
                            <li><a href="#">General <span>(25)</span></a></li>
                            <li><a href="#">Lifestyle <span>(12)</span></a></li>
                            <li><a href="#">Travel <span>(5)</span></a></li>
                            <li><a href="#">Design <span>(22)</span></a></li>
                            <li><a href="#">Creative <span>(8)</span></a></li>
                            <li><a href="#">Educaion <span>(14)</span></a></li>
                        </ul>
                    </div><!-- End sidebar categories-->
                    <!--<h3 class="sidebar-title">Recent Posts</h3>
                    <div class="sidebar-item recent-posts">
                        <div class="post-item clearfix">
                            <img src="~/assets/img/blog/blog-recent-1.jpg" alt="">
                            <h4><a asp-area="" asp-controller="Home" asp-action="BlogSingle">Nihil blanditiis at in nihil autem</a></h4>
                            <time datetime="2020-01-01">Jan 1, 2020</time>
                        </div>

                        <div class="post-item clearfix">
                            <img src="~/assets/img/blog/blog-recent-2.jpg" alt="">
                            <h4><a asp-area="" asp-controller="Home" asp-action="BlogSingle">Quidem autem et impedit</a></h4>
                            <time datetime="2020-01-01">Jan 1, 2020</time>
                        </div>

                        <div class="post-item clearfix">
                            <img src="~/assets/img/blog/blog-recent-3.jpg" alt="">
                            <h4><a asp-area="" asp-controller="Home" asp-action="BlogSingle">Id quia et et ut maxime similique occaecati ut</a></h4>
                            <time datetime="2020-01-01">Jan 1, 2020</time>
                        </div>

                        <div class="post-item clearfix">
                            <img src="~/assets/img/blog/blog-recent-4.jpg" alt="">
                            <h4><a asp-area="" asp-controller="Home" asp-action="BlogSingle">Laborum corporis quo dara net para</a></h4>
                            <time datetime="2020-01-01">Jan 1, 2020</time>
                        </div>

                        <div class="post-item clearfix">
                            <img src="~/assets/img/blog/blog-recent-5.jpg" alt="">
                            <h4><a asp-area="" asp-controller="Home" asp-action="BlogSingle">Et dolores corrupti quae illo quod dolor</a></h4>
                            <time datetime="2020-01-01">Jan 1, 2020</time>
                        </div>

                    </div>-->
                    <!-- End sidebar recent posts-->

                    <h3 class="sidebar-title">Tags</h3>
                    <div class="sidebar-item tags">
                        <ul>
                            <li><a href="#">App</a></li>
                            <li><a href="#">IT</a></li>
                            <li><a href="#">Business</a></li>
                            <li><a href="#">Mac</a></li>
                            <li><a href="#">Design</a></li>
                            <li><a href="#">Office</a></li>
                            <li><a href="#">Creative</a></li>
                            <li><a href="#">Studio</a></li>
                            <li><a href="#">Smart</a></li>
                            <li><a href="#">Tips</a></li>
                            <li><a href="#">Marketing</a></li>
                        </ul>
                    </div><!-- End sidebar tags-->

                </div><!-- End sidebar -->

            </div><!-- End blog sidebar -->

        </div>

    </div>
</section>

<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

<!-- Vendor JS Files -->
<script src="~/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="~/assets/vendor/glightbox/js/glightbox.min.js"></script>
<script src="~/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<script src="~/assets/vendor/php-email-form/validate.js"></script>
<script src="~/assets/vendor/swiper/swiper-bundle.min.js"></script>

<!-- Template Main JS File -->
<script src="~/assets/js/main.js"></script>





@*<h1>Index</h1>

    <p>
        <a asp-action="Create">Create New</a>
    </p>
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Title)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Author)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Text)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Image)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Topic)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Title)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Author)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Text)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Image)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Topic.Name)
                    </td>
                    <td>
                        <a asp-action="Edit" asp-route-id="@item.ID">Edit</a> |
                        <a asp-action="Details" asp-route-id="@item.ID">Details</a> |
                        <a asp-action="Delete" asp-route-id="@item.ID">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>*@
